# WebsiteInfo - 油猴脚本

## 📖 简介

这是一个功能强大的油猴（Tampermonkey/Greasemonkey）用户脚本，可以自动获取当前网站的各种详细信息，并在一个紧凑、透明、高度自适应的浮动面板中展示。采用分层显示设计，默认显示5个核心信息，其余详细信息可通过展开按钮查看并自动调整窗口大小，每个信息都配有便捷的复制按钮，还可以直接下载网站图标。

## ✨ 功能特点

- 🌐 **全面的网站信息获取**：获取网站标题、地址、描述、关键词、作者等信息
- 🎨 **紧凑透明设计**：采用半透明黑色背景，毛玻璃效果，不影响网页阅读
- 📊 **Excel表格布局**：清晰的三列表格设计，信息一目了然
- 🔧 **分层显示设计**：默认显示5个核心信息，详细信息可按需展开
- 📏 **智能自适应**：窗口高度自动适应内容，无需手动调整大小
- 🚫 **无滚动条设计**：所有内容都在可视区域内，避免滚动操作
- 🖱️ **可拖拽移动**：支持拖拽面板到任意位置，避免遮挡重要内容
- 📋 **一键复制功能**：每个信息项都有独立的复制按钮
- 📥 **图标下载功能**：可以直接下载网站的favicon图标到本地
- 🔄 **自动更新**：支持 SPA（单页应用）页面变化检测
- 📱 **响应式设计**：适配不同屏幕尺寸，移动端更紧凑
- 💡 **智能展开**：长文本可点击展开查看完整内容
- 🎯 **智能识别**：自动识别各种类型的网站元数据

## 📊 获取的信息类型

### 🔹 基本信息（默认显示）

| 信息类型 | 描述 | 显示标签 | 特殊功能 |
|---------|------|---------|---------|
| 网站标题 | 页面的 `<title>` 标签内容 | 标题 | 复制 |
| 网站地址 | 完整的 URL 地址 | 地址 | 复制 |
| 域名 | 网站的主域名 | 域名 | 复制 |
| Favicon | 网站图标 URL 和预览 | 图标 | 复制 + 下载 |
| 路径 | URL 中的路径部分 | 路径 | 复制 |

### 🔸 详细信息（展开显示）

| 信息类型 | 描述 | 显示标签 | 特殊功能 |
|---------|------|---------|---------|
| 协议 | HTTP 或 HTTPS | 协议 | 复制 |
| 端口 | 网站使用的端口号 | 端口 | 复制 |
| 查询参数 | URL 中的查询字符串 | 参数 | 复制 |
| 网站描述 | meta description 或 og:description | 描述 | 复制 |
| 关键词 | meta keywords | 关键词 | 复制 |
| 作者 | meta author | 作者 | 复制 |
| 编码 | 页面字符编码 | 编码 | 复制 |
| 语言 | 页面语言设置 | 语言 | 复制 |

## 🚀 安装步骤

### 1. 安装油猴扩展

首先需要在浏览器中安装油猴扩展：

- **Chrome/Edge**: [Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)
- **Firefox**: [Tampermonkey](https://addons.mozilla.org/en-US/firefox/addon/tampermonkey/) 或 [Greasemonkey](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)
- **Safari**: [Tampermonkey](https://apps.apple.com/us/app/tampermonkey/id1482490089)

### 2. 安装脚本

1. 点击油猴扩展图标
2. 选择「添加新脚本」或「Create a new script」
3. 删除默认代码，复制粘贴 `WebsiteInfo.js` 文件中的所有代码
4. 按 `Ctrl+S`（Windows/Linux）或 `Cmd+S`（Mac）保存脚本

### 3. 启用脚本

确保脚本在油猴管理界面中处于启用状态（绿色开关）。

## 🎯 使用方法

1. **自动运行**：脚本会在所有网站上自动运行
2. **查看面板**：访问任何网站时，右上角会出现一个紧凑的半透明信息面板
3. **基本信息**：默认显示5个最常用的网站信息，窗口大小正好适合
4. **展开详细信息**：点击「显示详细信息」按钮，窗口会自动展开并显示全部13个信息项
5. **收起详细信息**：再次点击按钮（此时显示为「隐藏详细信息」），窗口会自动收起到原始大小
6. **拖拽移动**：点击并拖拽面板头部可以移动到任意位置
7. **复制信息**：点击任何信息行右侧的绿色「复制」按钮即可复制该信息到剪贴板
8. **下载图标**：在图标行点击蓝色「下载」按钮可以下载网站的favicon到本地
9. **最小化面板**：点击面板右上角的 `−` 按钮可以最小化面板，再次点击 `+` 可以展开
10. **展开长文本**：对于超过35个字符的内容，可以点击展开查看完整信息

## 🎨 界面说明

### 核心特色：
- **半透明背景**：采用75%透明度的黑色背景，不会遮挡网页内容
- **毛玻璃效果**：使用 `backdrop-filter: blur(10px)` 创建现代化的毛玻璃效果
- **表格布局**：清晰的三列表格设计（标签 | 内容 | 操作）
- **分层显示**：智能分为基本信息和详细信息两层，避免信息过载
- **自适应高度**：窗口高度自动根据内容调整，无需手动设置
- **无滚动条**：所有内容都在可视区域内，简洁美观
- **悬停效果**：鼠标悬停时表格行会有轻微高亮
- **拖拽指示**：拖拽时面板会有轻微旋转效果
- **智能省略**：长文本自动省略，悬停显示完整内容
- **响应式字体**：根据屏幕尺寸自动调整字体大小

### 交互特性：
- **拖拽移动**：抓取头部可以自由移动面板位置
- **智能定位**：拖拽时自动限制在视窗范围内
- **自动调整**：展开详细信息时窗口自动变高，收起时自动变回原始大小
- **分层展开**：基本信息始终显示，详细信息按需展开
- **点击展开**：长文本可以点击切换显示模式
- **双按钮设计**：图标行有两个按钮（复制 + 下载）
- **复制反馈**：复制成功后按钮会变色并显示"已复制"
- **下载反馈**：下载时显示"下载中"，完成后显示"已下载"

### 展开按钮设计：
- **默认状态**：灰色按钮，显示「显示详细信息」
- **展开状态**：红色按钮，显示「隐藏详细信息」
- **平滑动画**：展开/收起过程有流畅的动画效果
- **自动调整**：展开时窗口高度自动增加，收起时自动恢复

### 窗口自适应特性：
- **默认尺寸**：340px宽度，高度自动适应5个基本信息
- **展开尺寸**：展开详细信息时，高度自动增加以显示所有13个信息项
- **无需调整**：不需要手动拖拽调整窗口大小
- **完美适配**：无论展开还是收起，内容都完全显示在可视区域内

### 图标下载功能：
- **智能命名**：下载的文件会自动命名为 `域名-favicon.扩展名`
- **格式识别**：自动识别图标格式（PNG、JPG、GIF、SVG、WebP、ICO）
- **降级方案**：如果直接下载失败，会在新窗口打开图标链接
- **状态提示**：下载过程中有明确的状态提示

## 🔧 自定义设置

### 修改默认显示的信息

在脚本代码中找到以下部分并修改：

```javascript
// 基本信息（默认显示）
const basicItems = [
    ['标题', info.title],
    ['地址', info.url],
    ['域名', info.domain],
    ['图标', info.favicon],
    ['路径', info.pathname]
];

// 详细信息（需要展开显示）
const detailItems = [
    ['协议', info.protocol],
    // ... 其他详细信息
];
```

### 修改窗口宽度

```css
#website-info-panel {
    width: 340px; /* 默认宽度，可以根据需要调整 */
}

/* 移动设备 */
@media (max-width: 768px) {
    #website-info-panel {
        width: 320px; /* 移动端宽度 */
    }
}
```

### 修改展开按钮样式

```css
.expand-btn {
    background: rgba(108, 117, 125, 0.8); /* 默认状态颜色（灰色） */
}

.expand-btn.expanded {
    background: rgba(220, 53, 69, 0.8); /* 展开状态颜色（红色） */
}
```

### 修改透明度

```css
#website-info-panel {
    background: rgba(0, 0, 0, 0.75); /* 第四个值控制透明度，0.75 = 75%不透明 */
    backdrop-filter: blur(10px);     /* 毛玻璃模糊度 */
}
```

### 添加新的信息类型

在 `getWebsiteInfo()` 函数中添加新的信息获取逻辑，然后在 `basicItems` 或 `detailItems` 数组中添加对应项目。

## 🐛 常见问题

### 1. 脚本不运行
- 确保油猴扩展已启用
- 检查脚本是否处于启用状态
- 尝试刷新页面

### 2. 面板不显示
- 检查浏览器控制台是否有错误
- 确认网站没有 CSP 策略阻止脚本运行
- 尝试在其他网站测试

### 3. 复制功能不工作
- 现代浏览器需要 HTTPS 才能使用 Clipboard API
- 脚本包含降级方案，会自动切换到传统复制方法

### 4. 图标下载问题
- 某些网站可能没有设置 favicon
- 跨域策略可能阻止图标下载，此时会在新窗口打开
- 确保浏览器允许下载文件

### 5. 展开功能问题
- 展开按钮点击后详细信息应该立即显示/隐藏，窗口大小自动调整
- 如果没有反应，检查浏览器控制台是否有错误
- 刷新页面会重置为默认收起状态

### 6. 拖拽功能问题
- 确保点击的是面板头部区域
- 拖拽范围会自动限制在浏览器窗口内
- 拖拽过程中窗口会有轻微旋转提示

### 7. 窗口大小问题
- 窗口高度完全自动管理，无需手动调整
- 如果内容显示不完整，可能是CSS冲突，尝试刷新页面
- 默认宽度为340px，移动端为320px

### 8. 文字显示不全
- 长文本会自动省略，鼠标悬停可显示完整内容
- 点击可展开的内容可以切换显示模式
- 可以通过复制按钮获取完整文本

### 9. 按钮显示问题
- 如果按钮被遮挡或显示不完整，尝试刷新页面
- 脚本已优化按钮布局，确保在各种屏幕尺寸下都能完整显示
- 按钮容器有固定宽度，不会超出面板边界

## 🆕 版本信息

### v1.0 (当前版本)
- 🎉 **初始发布版本**
- 📏 **自适应窗口高度**：窗口高度完全自动适应内容，无需手动调整
- 🔧 **分层显示设计**：默认显示5个核心信息，详细信息可按需展开
- 🎨 **优化界面布局**：采用固定表格布局，确保按钮完整显示
- 📊 **13种信息获取**：支持获取网站的各种详细元数据
- ⚡ **自动展开调整**：点击展开详细信息时窗口自动变高，收起时自动恢复
- 🎯 **按钮布局优化**：使用专用的action-cell类，确保按钮不被遮挡
- 💫 **简化交互**：专注于信息获取和展示，自动化程度高
- 📥 **图标下载功能**：可以直接下载网站favicon，智能命名和格式识别
- 🖱️ **拖拽移动功能**：支持拖拽面板到任意位置
- 📱 **响应式设计**：适配不同屏幕尺寸，移动端友好

## 📄 许可证

本脚本采用 **MIT许可证** 发布，完全免费使用，您可以自由修改和分发。

## 👨‍💻 作者

**Xiang0731** - 项目维护者

## 🤝 贡献

如果您有任何建议或发现问题，欢迎提出改进意见！

---

**享受完全自适应的网站信息获取体验！** 🎉 